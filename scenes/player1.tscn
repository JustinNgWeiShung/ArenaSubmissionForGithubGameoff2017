[gd_scene load_steps=19 format=1]

[ext_resource path="res://scripts/player1.gd" type="Script" id=1]
[ext_resource path="res://res/Game Maker Beat Em Up - Part 1 Assets/p1.png" type="Texture" id=2]
[ext_resource path="res://scenes/recolorshader.tscn" type="PackedScene" id=3]

[sub_resource type="RectangleShape2D" id=1]

custom_solver_bias = 0.0
extents = Vector2( 30, 3 )

[sub_resource type="CanvasItemShader" id=2]

_code = {
"fragment": "/*  Team Color Fragment Shader
    Shader that looks for selected color pixel and changes them to 
    another color
    Leaves alpha intact
*/
uniform color input_color = vec4(0.8,0.8,0.8,1);
uniform float range = 0.8;
uniform color output_color = vec4(1, 0, 0, 1); // Color to change to

vec4 col = tex(TEXTURE,UV); // Get current color of pixel

if (col.r == input_color.r){ 
    if (col.b == input_color.b){
		if(col.g== input_color.g){
        	COLOR = color(output_color.rgb * col.g, col.a);
		}
    }
}",
"fragment_ofs": 0,
"light": "",
"light_ofs": 0,
"vertex": "",
"vertex_ofs": 0
}

[sub_resource type="CanvasItemMaterial" id=3]

shader/shader = SubResource( 2 )
shader/shading_mode = 0
shader_param/input_color = Color( 0.203922, 0.2, 0.231373, 0.992157 )
shader_param/range = 0.8
shader_param/output_color = Color( 0.178711, 0.267136, 0.476563, 1 )

[sub_resource type="Animation" id=4]

resource/name = "attack"
length = 0.15
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.08, 0.11 ),
"transitions": FloatArray( 1, 1, 1 ),
"update": 1,
"values": [ 0, 2, 0 ]
}
tracks/1/type = "method"
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = {
"times": FloatArray( 0.08, 0.11, 0.15 ),
"transitions": FloatArray( 1, 1, 1 ),
"values": [ {
"args": [  ],
"method": "setAttack"
}, {
"args": [  ],
"method": "setRecover"
}, {
"args": [  ],
"method": "setIdle"
} ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Sprite:region_rect")
tracks/2/interp = 1
tracks/2/imported = false
tracks/2/keys = {
"times": FloatArray( 0, 0.03, 0.08, 0.11, 0.12, 0.15 ),
"transitions": FloatArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ Rect2( 179, 121, 80, 117 ), Rect2( 92, 120, 85, 118 ), Rect2( 0, 0, 97, 118 ), Rect2( 0, 0, 97, 118 ), Rect2( 92, 120, 85, 118 ), Rect2( 179, 121, 80, 117 ) ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("hitbox:transform/pos")
tracks/3/interp = 1
tracks/3/imported = false
tracks/3/keys = {
"times": FloatArray( 0.08, 0.11 ),
"transitions": FloatArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 44, 18 ), Vector2( 44, 18 ) ]
}

[sub_resource type="Animation" id=5]

resource/name = "block"
length = 0.01
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.01 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite:region_rect")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = {
"times": FloatArray( 0 ),
"transitions": FloatArray( 1 ),
"update": 1,
"values": [ Rect2( 0, 239, 86, 116 ) ]
}

[sub_resource type="Animation" id=14]

resource/name = "getUp"
length = 0.05
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.05 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("hurtbox:collision/layers")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = {
"times": FloatArray( 0, 0.05 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 1 ]
}

[sub_resource type="Animation" id=13]

resource/name = "hurt"
length = 0.01
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.01 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite:region_rect")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = {
"times": FloatArray( 0 ),
"transitions": FloatArray( 1 ),
"update": 0,
"values": [ Rect2( 0, 120, 90, 117 ) ]
}

[sub_resource type="Animation" id=6]

length = 0.01
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.01 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite:region_rect")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = {
"times": FloatArray( 0 ),
"transitions": FloatArray( 1 ),
"update": 1,
"values": [ Rect2( 179, 121, 80, 117 ) ]
}

[sub_resource type="Animation" id=7]

resource/name = "jump"
length = 0.05
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.05 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 0 ]
}

[sub_resource type="Animation" id=12]

resource/name = "jump_attack"
length = 0.09
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.04, 0.05, 0.09 ),
"transitions": FloatArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 2, 2, 0 ]
}
tracks/1/type = "method"
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = {
"times": FloatArray( 0.04, 0.05 ),
"transitions": FloatArray( 1, 1 ),
"values": [ {
"args": [  ],
"method": "setJumpAttack"
}, {
"args": [  ],
"method": "setJumpRecover"
} ]
}

[sub_resource type="Animation" id=15]

resource/name = "knockdown"
length = 0.05
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.05 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("hitbox:collision/layers")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = {
"times": FloatArray( 0, 0.05 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 1, 0 ]
}

[sub_resource type="Animation" id=8]

resource/name = "run"
length = 0.01
loop = false
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.01 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 0 ]
}

[sub_resource type="Animation" id=9]

resource/name = "walk"
length = 0.3
loop = true
step = 0.01
tracks/0/type = "value"
tracks/0/path = NodePath("hitbox:collision/mask")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = {
"times": FloatArray( 0, 0.3 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ 0, 0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite:region_rect")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = {
"times": FloatArray( 0, 0.15 ),
"transitions": FloatArray( 1, 1 ),
"update": 1,
"values": [ Rect2( 179, 0, 85, 119 ), Rect2( 261, 121, 80, 119 ) ]
}

[sub_resource type="RectangleShape2D" id=10]

custom_solver_bias = 0.0
extents = Vector2( 9.66667, 10.6667 )

[sub_resource type="RectangleShape2D" id=11]

custom_solver_bias = 0.0
extents = Vector2( 10, 10 )

[node name="Player1" type="KinematicBody2D"]

input/pickable = true
shapes/0/shape = SubResource( 1 )
shapes/0/transform = Matrix32( 1, 0, 0, 1, 0, 56 )
shapes/0/trigger = false
collision/layers = 8
collision/mask = 4
collision/margin = 0.08
script/script = ExtResource( 1 )

[node name="Sprite" type="Sprite" parent="."]

material/material = SubResource( 3 )
texture = ExtResource( 2 )
frame = 1
region = true
region_rect = Rect2( 0, 120, 90, 117 )

[node name="groundCollider" type="CollisionShape2D" parent="."]

transform/pos = Vector2( 0, 56 )
shape = SubResource( 1 )
trigger = false
_update_shape_index = 0

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]

playback/process_mode = 0
playback/default_blend_time = 0.0
root/root = NodePath("..")
anims/attack = SubResource( 4 )
anims/block = SubResource( 5 )
anims/getUp = SubResource( 14 )
anims/hurt = SubResource( 13 )
anims/idle = SubResource( 6 )
anims/jump = SubResource( 7 )
anims/jump_attack = SubResource( 12 )
anims/knockdown = SubResource( 15 )
anims/run = SubResource( 8 )
anims/walk = SubResource( 9 )
playback/active = true
playback/speed = 1.0
blend_times = [  ]
autoplay = ""

[node name="recolorshader" parent="." instance=ExtResource( 3 )]

editor/display_folded = true
visibility/visible = false

[node name="hurtbox" type="Area2D" parent="."]

transform/pos = Vector2( 1, 10 )
transform/scale = Vector2( 0.9, 1.25 )
input/pickable = true
shapes/0/shape = SubResource( 10 )
shapes/0/transform = Matrix32( 3, 0, 0, 3, 0, 0 )
shapes/0/trigger = false
gravity_vec = Vector2( 0, 1 )
gravity = 98.0
linear_damp = 0.1
angular_damp = 1.0
collision/mask = 0
__meta__ = {
"_edit_group_": true
}

[node name="rectangle" type="CollisionShape2D" parent="hurtbox"]

transform/scale = Vector2( 3, 3 )
shape = SubResource( 10 )
trigger = false
_update_shape_index = 0

[node name="hitbox" type="Area2D" parent="."]

transform/pos = Vector2( 44, 18 )
transform/scale = Vector2( 0.5, 0.34375 )
input/pickable = true
shapes/0/shape = SubResource( 11 )
shapes/0/transform = Matrix32( 3, 0, 0, 3, 0, 0 )
shapes/0/trigger = false
gravity_vec = Vector2( 0, 1 )
gravity = 98.0
linear_damp = 0.1
angular_damp = 1.0
collision/layers = 0
collision/mask = 0
__meta__ = {
"_edit_group_": true
}

[node name="rectangle" type="CollisionShape2D" parent="hitbox"]

transform/scale = Vector2( 3, 3 )
shape = SubResource( 11 )
trigger = false
_update_shape_index = 0

[connection signal="area_enter" from="hurtbox" to="." method="_on_hurtbox_area_enter"]

[connection signal="area_enter" from="hitbox" to="." method="_on_hitbox_area_enter"]


[editable path="recolorshader"]
